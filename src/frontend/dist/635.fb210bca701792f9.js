"use strict";(self.webpackChunkdashly=self.webpackChunkdashly||[]).push([[635],{1635:(H,h,r)=>{r.r(h),r.d(h,{NotesModule:()=>G});var u=r(6895),d=r(144),c=r(4006),t=r(4650),b=r(7579);let f=(()=>{class n{constructor(){this.subjectName=new b.x}sendUpdate(e){this.subjectName.next({text:e})}getUpdate(){return this.subjectName.asObservable()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=r(2340),y=r(529);let m=(()=>{class n{constructor(e){this.http=e,this.notesUrl=C.N.apiUrl+"/notes"}getById(e){return this.http.get(this.notesUrl+"/"+e)}getByCategory(e){return this.http.get(this.notesUrl+"/category/"+e)}insert(e){return this.http.post(this.notesUrl,e)}update(e,o){return this.http.put(this.notesUrl+"/"+e,o)}delete(e){return this.http.delete(this.notesUrl+"/"+e)}deleteByCategory(e){return this.http.delete(this.notesUrl+"/category/"+e)}deleteAll(){return this.http.delete(this.notesUrl)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(y.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var g=r(4859),N=r(284),_=r(9549),T=r(4537);let v=(()=>{class n{constructor(e,o,s,a){this._fb=e,this.commonService=o,this.notesService=s,this.route=a,this.editMode=!1}ngOnInit(){this.noteForm=this._fb.group({title:[null,c.kI.required],notes:[],noteCategoryId:null}),this.routeSub=this.route.params.subscribe(e=>{null!=e.id&&(this.noteId=e.id),null!=e.categoryId&&(this.noteId=0,this.categoryId=e.categoryId),this.noteId>0&&(this.editMode=!0,this.getNoteById(this.noteId))})}get notesRawControl(){return this.noteForm.controls.notes}getNoteById(e){this.notesService.getById(e).subscribe(o=>{this.note=o,this.noteForm.patchValue({title:this.note.title,notes:this.note.notes,noteCategoryId:this.note.noteCategoryId})})}onSubmit(){this.editMode?this.notesService.update(this.noteId,this.noteForm.value).subscribe(e=>{this.commonService.sendUpdate("Note Updated")}):this.notesService.insert({title:this.noteForm.value.title,notes:this.noteForm.value.notes,noteCategoryId:this.categoryId}).subscribe(o=>{this.commonService.sendUpdate("Note Added")})}ngOnDestroy(){this.routeSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.qu),t.Y36(f),t.Y36(m),t.Y36(d.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-note-editor"]],decls:16,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"wrapper"],[1,"row"],[1,"column"],[1,"action-buttons"],[1,"full-width-input"],["type","text","autocomplete","new-password","matInput","","placeholder","Title","formControlName","title","required",""],["mat-button","","color","accent","type","reset"],["mat-raised-button","","color","primary"],[3,"control"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mat-form-field",5),t._UZ(6,"input",6),t.TgZ(7,"mat-error"),t._uU(8," Please provide a title name "),t.qZA()(),t.TgZ(9,"button",7),t._uU(10,"Reset"),t.qZA(),t.TgZ(11,"button",8),t._uU(12,"Save"),t.qZA()()()(),t.TgZ(13,"div",2)(14,"div",3),t._UZ(15,"app-text-editor",9),t.qZA()()()()),2&e&&(t.Q6J("formGroup",o.noteForm),t.xp6(15),t.Q6J("control",o.notesRawControl))},dependencies:[g.lW,N.Nt,_.KE,_.TO,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.sg,c.u,T.d],styles:[".wrapper[_ngcontent-%COMP%]{margin:5px}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:100%;flex:1;margin:2px}.full-width-input[_ngcontent-%COMP%]{width:100%}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}"]}),n})();var p=r(5412);let S=(()=>{class n{constructor(e){this.dialogRef=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-edit-category"]],decls:10,vars:2,consts:[["mat-dialog-title",""],[1,"example-full-width"],["matInput","","placeholder","Category Name",3,"ngModel","ngModelChange"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"mat-dialog-close"]],template:function(e,o){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Create a category"),t.qZA(),t.TgZ(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"input",2),t.NdJ("ngModelChange",function(a){return o.categoryName=a}),t.qZA()()(),t.TgZ(5,"mat-dialog-actions")(6,"button",3),t._uU(7,"Cancel"),t.qZA(),t.TgZ(8,"button",4),t._uU(9,"OK"),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngModel",o.categoryName),t.xp6(4),t.Q6J("mat-dialog-close",o.categoryName))},dependencies:[g.lW,N.Nt,_.KE,p.ZT,p.uh,p.xY,p.H8,c.Fj,c.JJ,c.On]}),n})(),Z=(()=>{class n{constructor(e){this.http=e,this.noteCategoryUrl=C.N.apiUrl+"/notecategory"}getAll(){return this.http.get(this.noteCategoryUrl)}getById(e){return this.http.get(this.noteCategoryUrl+"/"+e)}insert(e){return this.http.post(this.noteCategoryUrl,e)}update(e,o){return this.http.put(this.noteCategoryUrl+"/"+e,o)}delete(e){return this.http.delete(this.noteCategoryUrl+"/"+e)}deleteAll(){return this.http.delete(this.noteCategoryUrl)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(y.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var w=r(7392);function M(n,i){1&n&&t.GkF(0)}const x=function(n){return{$implicit:n}};function U(n,i){if(1&n&&(t.ynx(0),t.YNc(1,M,1,0,"ng-container",3),t.BQk()),2&n){const e=t.oxw(),o=t.MAs(4);t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(2,x,e.notecategories))}}function O(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"span",5),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.openAddCategoryDialog())}),t.TgZ(2,"mat-icon"),t._uU(3,"create_new_folder"),t.qZA(),t._uU(4,"Add Category "),t.qZA()()}}function A(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"span",11)(2,"mat-icon"),t._uU(3,"description"),t.qZA(),t.TgZ(4,"span",12),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(4);return t.KtG(l.onNoteSelected(a))}),t._uU(5),t.qZA(),t.TgZ(6,"span",9)(7,"mat-icon",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(4);return t.KtG(l.editNote(a))}),t._uU(8,"edit"),t.qZA(),t.TgZ(9,"mat-icon",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(4);return t.KtG(l.deleteNote(a))}),t._uU(10,"delete"),t.qZA()()()()}if(2&n){const e=i.$implicit;t.xp6(5),t.hij(" ",e.title,"")}}function I(n,i){if(1&n&&(t.TgZ(0,"ul"),t.YNc(1,A,11,1,"li",6),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.notes)}}function F(n,i){1&n&&t.GkF(0)}function J(n,i){if(1&n&&(t.ynx(0),t.YNc(1,F,1,0,"ng-container",3),t.BQk()),2&n){const e=t.oxw().$implicit;t.oxw(2);const o=t.MAs(4);t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(2,x,e.categories))}}function P(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"span",7),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.onCategorySelected(a))}),t.TgZ(2,"mat-icon"),t._uU(3,"folder"),t.qZA(),t.TgZ(4,"span",8),t._uU(5),t.qZA(),t.TgZ(6,"span",9)(7,"mat-icon"),t._uU(8,"create_new_folder"),t.qZA(),t.TgZ(9,"mat-icon"),t._uU(10,"edit"),t.qZA(),t.TgZ(11,"mat-icon",5),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.onCategoryDeleted(a))}),t._uU(12,"delete"),t.qZA()()(),t.YNc(13,I,2,1,"ul",10),t.YNc(14,J,2,4,"ng-container",10),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(5),t.Oqu(e.name),t.xp6(8),t.Q6J("ngIf",e.notes),t.xp6(1),t.Q6J("ngIf",e.categories)}}function Y(n,i){if(1&n&&(t.TgZ(0,"ul"),t.YNc(1,P,15,3,"li",6),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}let E=(()=>{class n{constructor(e,o,s,a,l,K){this.noteCategoryService=e,this.dialog=o,this.notesService=s,this.commonService=a,this.router=l,this.route=K,this.subscriptionName=this.commonService.getUpdate().subscribe($=>{this.messageReceived=$,this.getLatestNotes()})}ngOnInit(){this.getLatestNotes()}getLatestNotes(){this.noteCategoryService.getAll().subscribe(e=>{this.notecategories=e})}onCategorySelected(e){this.router.navigate([e.id,"add"],{relativeTo:this.route})}onCategoryDeleted(e){this.noteCategoryService.delete(e.id).subscribe(o=>{this.commonService.sendUpdate("Category Updated")})}openAddCategoryDialog(){this.dialog.open(S).afterClosed().subscribe(o=>{o&&this.noteCategoryService.insert({name:o}).subscribe(s=>{this.commonService.sendUpdate("Category Updated")})})}deleteNote(e){this.notesService.delete(e.id).subscribe(o=>{this.commonService.sendUpdate("Note Updated")})}onNoteSelected(e){this.router.navigate(["view",e.id],{relativeTo:this.route})}editNote(e){this.router.navigate(["edit",e.id],{relativeTo:this.route})}ngOnDestroy(){this.subscriptionName.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z),t.Y36(p.uw),t.Y36(m),t.Y36(f),t.Y36(d.F0),t.Y36(d.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-note-sidebar"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["other_content",""],["replyThread",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"content-center"],[3,"click"],[4,"ngFor","ngForOf"],[1,"title-wrapper",3,"click"],[1,"title"],[1,"actions"],[4,"ngIf"],[1,"title-wrapper"],[1,"title",3,"click"]],template:function(e,o){if(1&e&&(t.YNc(0,U,2,4,"ng-container",0),t.YNc(1,O,5,0,"ng-template",null,1,t.W1O),t.YNc(3,Y,2,1,"ng-template",null,2,t.W1O)),2&e){const s=t.MAs(2);t.Q6J("ngIf",o.notecategories.length>0)("ngIfElse",s)}},dependencies:[u.sg,u.O5,u.tP,w.Hw],styles:["*[_ngcontent-%COMP%]{padding:0;margin:0}ul[_ngcontent-%COMP%]{list-style:none;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:20px}.title-wrapper[_ngcontent-%COMP%]{display:flex;font-weight:500;cursor:pointer}.title-wrapper[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:none}.title-wrapper[_ngcontent-%COMP%]:hover{transform:scale(1.05);width:100px}.title-wrapper[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]{margin-left:5px;margin-top:-3px;padding:0;display:inline-flex}.content-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100%}.content-center[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;cursor:pointer;align-items:flex-end}"]}),n})();const k=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-note-main"]],decls:5,vars:0,consts:[[1,"main"],[1,"side-bar"],[1,"editor"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-note-sidebar"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"router-outlet"),t.qZA()())},dependencies:[d.lC,E],styles:[".main[_ngcontent-%COMP%]{display:flex;position:relative;background-color:#fff}.main[_ngcontent-%COMP%]   .side-bar[_ngcontent-%COMP%]{flex-shrink:0;flex-basis:200px;position:sticky;top:50px;left:0;height:440px;overflow-x:hidden;overflow-y:scroll}.main[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]{flex-basis:100%;height:100%;position:relative}"]}),n})(),data:{breadcrumb:""},children:[{path:":categoryId/add",component:v,data:{breadcrumb:"Add Category"}},{path:"edit/:id",component:v,data:{breadcrumb:"Edit"}},{path:"view/:id",component:(()=>{class n{constructor(e,o,s){this.notesService=e,this.router=o,this.route=s}ngOnInit(){this.routeSub=this.route.params.subscribe(e=>{this.noteId=e.id,this.getNoteById(e.id)})}getNoteById(e){this.notesService.getById(e).subscribe(o=>{this.note=o})}ngOnDestroy(){this.routeSub.unsubscribe()}onEditClick(){this.router.navigate(["../../edit",this.noteId],{relativeTo:this.route})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m),t.Y36(d.F0),t.Y36(d.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-note-viewer"]],decls:12,vars:2,consts:[[1,"wrapper"],[1,"buttons"],["mat-button","","color","accent"],["mat-raised-button","","color","primary","type","button",3,"click"],[1,"row"],[1,"column"],[1,"viewer",3,"innerHTML"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t._uU(5,"Delete"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return o.onEditClick()}),t._uU(7,"Edit"),t.qZA()()(),t._UZ(8,"hr"),t.TgZ(9,"div",4)(10,"div",5),t._UZ(11,"div",6),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(o.note.title),t.xp6(9),t.Q6J("innerHTML",o.note.notes,t.oJD))},dependencies:[g.lW],styles:["img{height:auto!important;width:100%!important;background-color:#fff}.wrapper[_ngcontent-%COMP%]{margin:0 5px;display:flex;align-items:baseline;justify-content:space-between;width:100%}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-basis:100%;flex:1;margin:5px 10px}.buttons[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:flex-end}"]}),n})(),data:{breadcrumb:"View"}}]}];let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.Bz.forChild(k),d.Bz]}),n})();var B=r(3871),Q=r(4466),j=r(6067);let G=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,q,B.q,c.u5,c.UX,Q.m,j.y]}),n})()}}]);