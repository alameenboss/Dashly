"use strict";(self.webpackChunkdashly=self.webpackChunkdashly||[]).push([[661],{3661:(K,h,i)=>{i.r(h),i.d(h,{DocumentsModule:()=>Q});var y=i(6895),d=i(144),f=i(1042),S=i(9646),x=i(8372),w=i(3900);const Z={toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{align:[]}],["image","blockquote","code-block"],["clean"]]};var t=i(4650),s=i(4006),g=i(755),M=i(2340),T=i(529);let C=(()=>{class o{constructor(e){this.http=e,this.documentUrl=M.N.apiUrl+"/document"}getAll(){return this.http.get(this.documentUrl)}getByDocId(e){return this.http.get(this.documentUrl+"/"+e)}deleteByDocId(e){return this.http.delete(this.documentUrl+"/"+e)}deleteAll(){return this.http.delete(this.documentUrl)}save(e,n){return this.http.post(this.documentUrl,{docId:e,content:n})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(T.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var A=i(4537);let v=(()=>{class o{constructor(e,n,a,l){this.formBuilder=e,this.route=n,this.toasterService=a,this.documentService=l,this.quillConfig=Z,this.formValid=!0}ngOnInit(){this.docId=this.route.snapshot.params.id,this.documentForm=this.formBuilder.group({content:null}),this.getById(this.docId),this.documentForm.valueChanges.pipe((0,x.b)(1500),(0,w.w)(e=>(0,S.of)(e))).subscribe(e=>{this.saveDocument(e)})}get documentRawControl(){return this.documentForm.controls.content}getById(e){this.documentService.getByDocId(e).subscribe(n=>{null!=n&&this.documentForm.patchValue({content:n.content})},n=>{this.toasterService.openSnackBar("Error Occured!","Ok")})}saveDocument(e){this.documentService.save(this.docId,e.content).subscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(d.gz),t.Y36(g.M),t.Y36(C))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-doc-editor"]],decls:3,vars:2,consts:[[3,"formGroup"],[1,"container"],[3,"control"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0)(1,"div",1),t._UZ(2,"app-text-editor",2),t.qZA()()),2&e&&(t.Q6J("formGroup",n.documentForm),t.xp6(2),t.Q6J("control",n.documentRawControl))},dependencies:[A.d,s._Y,s.JL,s.sg],styles:[".container[_ngcontent-%COMP%]     .ql-editor{width:8.5in;min-height:11in;padding:1in;margin:1rem;box-shadow:0 0 5px #00000080;background-color:#fff}.container[_ngcontent-%COMP%]     .ql-container.ql-snow{border:none;display:flex;justify-content:center}.container[_ngcontent-%COMP%]     .ql-toolbar.ql-snow{display:flex;justify-content:center;position:sticky;top:0;z-index:125;background-color:#f3f3f3;border:none;box-shadow:0 0 5px #00000080}@page{margin:1in}@media print{body[_ngcontent-%COMP%]{background:none}.container[_ngcontent-%COMP%]     .ql-editor{width:6.5in;height:9in;padding:0;margin:0;box-shadow:none;align-self:flex-start}.container[_ngcontent-%COMP%]     .ql-toolbar.ql-snow{display:none}}"]}),o})();var D=i(7974),u=i(6308),r=i(671),m=i(987),R=i(5412),I=i(7392),B=i(4859),O=i(284),b=i(9549);function U(o,c){1&o&&(t.TgZ(0,"th",15),t._uU(1,"Id"),t.qZA())}function L(o,c){if(1&o&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&o){const e=c.$implicit;t.xp6(1),t.Oqu(e.docId)}}function Y(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"th",17)(1,"div",18)(2,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.add())}),t.TgZ(3,"mat-icon"),t._uU(4,"add_box"),t.qZA()(),t.TgZ(5,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.deleteAll())}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()()()()}}function F(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"td",16)(1,"div",18)(2,"button",19),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.edit(l.docId))}),t.TgZ(3,"mat-icon"),t._uU(4,"edit"),t.qZA()(),t.TgZ(5,"button",19),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.delete(l.docId))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()()()()}}function N(o,c){1&o&&t._UZ(0,"tr",20)}function k(o,c){1&o&&t._UZ(0,"tr",21)}const G=function(){return[5,10,20]};let H=(()=>{class o{constructor(e,n,a,l){this.router=e,this.toasterService=n,this.dialog=a,this.documentService=l,this.displayedColumns=["docid","action"]}ngOnInit(){this.getAllDocuments()}getAllDocuments(){this.documentService.getAll().subscribe(e=>{null!=e&&(this.dataSource=new r.by(e),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.table.dataSource=this.dataSource)})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}deleteAll(){this.dialog.open(m.I,{width:"400px",data:{id:0},disableClose:!0}).afterClosed().subscribe(n=>{!0===n&&this.documentService.deleteAll().subscribe(a=>{this.toasterService.openSnackBar("Deleted Succesfully!","Ok"),this.getAllDocuments()})})}add(){this.router.navigateByUrl(`documents/edit/${(0,f.Z)()}`)}edit(e){this.router.navigateByUrl(`documents/edit/${e}`)}delete(e){this.dialog.open(m.I,{width:"400px",data:{id:e},disableClose:!0}).afterClosed().subscribe(a=>{!0===a&&this.documentService.deleteByDocId(e).subscribe(l=>{this.toasterService.openSnackBar("Deleted Succesfully!","Ok"),this.getAllDocuments()})})}deleteAllWebapp(){this.dialog.open(m.I,{width:"400px",disableClose:!0}).afterClosed().subscribe(n=>{!0===n&&this.documentService.deleteAll().subscribe(a=>{this.toasterService.openSnackBar("All apps deleted succesfully!","Ok"),this.getAllDocuments()})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.F0),t.Y36(g.M),t.Y36(R.uw),t.Y36(C))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-document-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(D.NW,5),t.Gf(u.YE,5),t.Gf(r.BZ,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.sort=a.first),t.iGM(a=t.CRH())&&(n.table=a.first)}},decls:19,vars:8,consts:[["appearance","outline",2,"width","100%"],["matInput","","placeholder","Ex. github",3,"keyup"],["input",""],[1,"mat-elevation-z8"],[1,"example-container"],["mat-table","","matSort","","matSortActive","docid","matSortDirection","asc","matSortDisableClear","","aria-label","Rows","multiTemplateDataRows","",1,"full-width-table"],["matColumnDef","docid","sticky",""],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","action","stickyEnd",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","example-row-row",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions"],["paginator",""],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[2,"display","flex"],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row","",1,"example-row-row"]],template:function(e,n){1&e&&(t.TgZ(0,"div")(1,"mat-form-field",0)(2,"mat-label"),t._uU(3,"Filter"),t.qZA(),t.TgZ(4,"input",1,2),t.NdJ("keyup",function(l){return n.applyFilter(l)}),t.qZA()()(),t.TgZ(6,"div",3)(7,"div",4)(8,"table",5),t.ynx(9,6),t.YNc(10,U,2,0,"th",7),t.YNc(11,L,2,1,"td",8),t.BQk(),t.ynx(12,9),t.YNc(13,Y,8,0,"th",10),t.YNc(14,F,8,0,"td",8),t.BQk(),t.YNc(15,N,1,0,"tr",11),t.YNc(16,k,1,0,"tr",12),t.qZA()(),t._UZ(17,"mat-paginator",13,14),t.qZA()),2&e&&(t.xp6(15),t.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("length",null==n.dataSource||null==n.dataSource.data?null:n.dataSource.data.length)("pageIndex",0)("pageSize",10)("pageSizeOptions",t.DdM(7,G)))},dependencies:[I.Hw,B.RK,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,D.NW,u.YE,u.nU,O.Nt,b.KE,b.hX],styles:[".example-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.full-width-table[_ngcontent-%COMP%]{width:100%}th.mat-column-docid[_ngcontent-%COMP%], td.mat-column-docid[_ngcontent-%COMP%]{padding-left:8px}td.mat-column-action[_ngcontent-%COMP%]{width:20px;padding-right:8px}"]}),o})();const E=[{path:"",redirectTo:`edit/${(0,f.Z)()}`,pathMatch:"full",data:{breadcrumb:""}},{path:"",component:v,data:{breadcrumb:""}},{path:"list",component:H,data:{breadcrumb:"list"}},{path:"edit/:id",component:v,data:{breadcrumb:"Edit"}}];let J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(E),d.Bz]}),o})();var z=i(6067),P=i(3871);let Q=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[y.ez,z.y,P.q,s.UX,J]}),o})()}}]);